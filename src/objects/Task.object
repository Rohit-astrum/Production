<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Close</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>DeleteSeries</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Follow</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>NewTask</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <enableFeeds>false</enableFeeds>
    <fields>
        <fullName>ActivityDate</fullName>
    </fields>
    <fields>
        <fullName>CallDisposition</fullName>
    </fields>
    <fields>
        <fullName>CallDurationInSeconds</fullName>
        <inlineHelpText>Call Duration in SECONDS</inlineHelpText>
    </fields>
    <fields>
        <fullName>CallObject</fullName>
    </fields>
    <fields>
        <fullName>CallType</fullName>
    </fields>
    <fields>
        <fullName>Description</fullName>
    </fields>
    <fields>
        <fullName>Email</fullName>
    </fields>
    <fields>
        <fullName>IsVisibleInSelfService</fullName>
    </fields>
    <fields>
        <fullName>OwnerId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Phone</fullName>
    </fields>
    <fields>
        <fullName>Priority</fullName>
        <picklist>
            <picklistValues>
                <fullName>High</fullName>
                <default>false</default>
                <highPriority>true</highPriority>
            </picklistValues>
            <picklistValues>
                <fullName>Normal</fullName>
                <default>true</default>
                <highPriority>false</highPriority>
            </picklistValues>
            <picklistValues>
                <fullName>Low</fullName>
                <default>false</default>
                <highPriority>false</highPriority>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>RecurrenceInterval</fullName>
    </fields>
    <fields>
        <fullName>RecurrenceRegeneratedType</fullName>
    </fields>
    <fields>
        <fullName>Status</fullName>
        <picklist>
            <picklistValues>
                <fullName>Not Started</fullName>
                <closed>false</closed>
                <default>true</default>
            </picklistValues>
            <picklistValues>
                <fullName>In Progress</fullName>
                <closed>false</closed>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Completed</fullName>
                <closed>true</closed>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Waiting on someone else</fullName>
                <closed>false</closed>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Deferred</fullName>
                <closed>false</closed>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Subject</fullName>
        <picklist>
            <picklistValues>
                <fullName>Call - Spoke</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Call - No Answer</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Call - LVM</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Email</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Mail</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Follow-Up</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Send Quote</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Payment</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Other</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>TaskSubtype</fullName>
    </fields>
    <fields>
        <fullName>Type</fullName>
        <picklist>
            <picklistValues>
                <fullName>Call</fullName>
                <default>true</default>
            </picklistValues>
            <picklistValues>
                <fullName>Email</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Mail</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Meeting</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Other</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>WhatId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>WhoId</fullName>
        <type>Lookup</type>
    </fields>
    <recordTypes>
        <fullName>D2D_System_Design</fullName>
        <active>true</active>
        <label>D2D System Design</label>
        <picklistValues>
            <picklist>Call_Answered__c</picklist>
            <values>
                <fullName>No</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Yes</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Event_Status__c</picklist>
            <values>
                <fullName>Canceled by Customer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Customer No-Show</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified-Approved</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Missed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Rescheduled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Scheduled</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Priority</picklist>
            <values>
                <fullName>High</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Low</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Normal</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Site_Survey_Type__c</picklist>
            <values>
                <fullName>Channel Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Commercial Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Drawing only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement %2B Draw</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement Only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Pictometry</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Re-Measure %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Redraw %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Field Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Remote Survey</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status</picklist>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Deferred</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>In Progress</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Not Started</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Waiting on someone else</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Subject</picklist>
            <values>
                <fullName>Call - LVM</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - No Answer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - Spoke</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Follow-Up</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Send Quote</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Type</picklist>
            <values>
                <fullName>Call</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Meeting</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>isdc_dialer_call_type__c</picklist>
            <values>
                <fullName>Click-to-Call</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Domino</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Seek</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Inactivity_Notice</fullName>
        <active>true</active>
        <label>Inactivity Notice</label>
        <picklistValues>
            <picklist>Call_Answered__c</picklist>
            <values>
                <fullName>No</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Yes</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Event_Status__c</picklist>
            <values>
                <fullName>Canceled by Customer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Customer No-Show</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified-Approved</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Missed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Rescheduled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Scheduled</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Priority</picklist>
            <values>
                <fullName>High</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Low</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Normal</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Site_Survey_Type__c</picklist>
            <values>
                <fullName>Drawing only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement %2B Draw</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement Only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Pictometry</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Re-Measure %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Redraw %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Field Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Remote Survey</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status</picklist>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Deferred</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>In Progress</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Not Started</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Waiting on someone else</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Subject</picklist>
            <values>
                <fullName>Call - LVM</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - No Answer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - Spoke</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Follow-Up</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Send Quote</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Type</picklist>
            <values>
                <fullName>Call</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Meeting</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>isdc_dialer_call_type__c</picklist>
            <values>
                <fullName>Click-to-Call</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Domino</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Seek</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Schedule_Event</fullName>
        <active>true</active>
        <description>Schedule Event</description>
        <label>Schedule Event</label>
        <picklistValues>
            <picklist>Call_Answered__c</picklist>
            <values>
                <fullName>No</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Yes</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Priority</picklist>
            <values>
                <fullName>High</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Low</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Normal</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Site_Survey_Type__c</picklist>
            <values>
                <fullName>Channel Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Commercial Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Field Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Remote Survey</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status</picklist>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Deferred</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>In Progress</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Not Started</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Waiting on someone else</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Subject</picklist>
            <values>
                <fullName>Call - LVM</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - No Answer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - Spoke</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Follow-Up</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Send Quote</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Type</picklist>
            <values>
                <fullName>Call</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Meeting</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>isdc_dialer_call_type__c</picklist>
            <values>
                <fullName>Click-to-Call</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Domino</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Seek</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Standard_Task</fullName>
        <active>true</active>
        <description>Standard Task Record (Call/Email logs, Follow-up tasks, Reminders)</description>
        <label>Standard Task</label>
        <picklistValues>
            <picklist>Call_Answered__c</picklist>
            <values>
                <fullName>No</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Yes</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Event_Status__c</picklist>
            <values>
                <fullName>Canceled by Customer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Customer No-Show</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Disqualified-Approved</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Missed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Rescheduled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Scheduled</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Priority</picklist>
            <values>
                <fullName>High</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Low</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Normal</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Site_Survey_Type__c</picklist>
            <values>
                <fullName>Channel Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Commercial Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Drawing only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement %2B Draw</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Measurement Only %28long%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Pictometry</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Re-Measure %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Redraw %28short%29</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Field Survey</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Residential Remote Survey</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status</picklist>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Deferred</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>In Progress</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Not Started</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Waiting on someone else</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Subject</picklist>
            <values>
                <fullName>Call - LVM</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - No Answer</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Call - Spoke</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Follow-Up</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Payment</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Send Quote</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Type</picklist>
            <values>
                <fullName>Call</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Email</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Mail</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Meeting</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Other</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>isdc_dialer_call_type__c</picklist>
            <values>
                <fullName>Click-to-Call</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Domino</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Seek</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <sharingModel>ControlledByParent</sharingModel>
    <webLinks>
        <fullName>Custom_Create_Followup_Event</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Create Follow-Up Event</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <url>/setup/ui/recordtypeselect.jsp?ent=Event&amp;evt6={!Task.Description}%0A{!Task.Notes__c}&amp;evt5={!Task.Subject}&amp;retURL={!Task.Id}&amp;save_new_url=%2F00U%2Fe%3FretURL%3D%252F{!Task.Id}%26what_id={!Task.What}</url>
    </webLinks>
    <webLinks>
        <fullName>Design_Completed</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Design Completed</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>// until ready for testing, just return false
//return false;
{!REQUIRESCRIPT(&quot;/soap/ajax/26.0/connection.js&quot;)}

if(&apos;{!Task.Status}&apos; == &apos;Completed&apos;){
	alert(&apos;This task is already complete.&apos;);
} else {
	var task = new sforce.SObject(&apos;Task&apos;);
	task.Id = &apos;{!Task.Id}&apos;;
	task.Status = &apos;Completed&apos;;

	var portalReferralQuery = sforce.connection.query(&quot;SELECT Id, D2D_Lead_Status__c FROM Portal_Referral__c WHERE Opportunity__c = &apos;{!Task.What}&apos;&quot;);

	var records = portalReferralQuery.getArray(&apos;records&apos;);

	if(records.length != 1){
		// error condition!
		alert(&apos;The portal referral was not found!&apos;);
	} else {
		var referral = records[0];
		if(referral.D2D_Lead_Status__c == &apos;Customer Opt-In&apos; || referral.D2D_Lead_Status__c == &apos;Visit Scheduled&apos;){
			referral.D2D_Lead_Status__c = &apos;Contract Generated&apos;;
		}

		sforce.connection.update([task,referral]);
	}
}
window.location.reload();</url>
    </webLinks>
    <webLinks>
        <fullName>qbdialer__Create_List</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Create List</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>{!REQUIRESCRIPT(&apos;https://sforce.insidesales.com/js/json.js&apos;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/11.1/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/jquery.min.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/jsonp.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/persist.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/ISConference.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/c2c/ISClickToCall.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/c2csf.js&quot;)}


var getTabClass = function() {
    var bodytags = document.getElementsByTagName(&quot;body&quot;);
    var classes  = bodytags[0].className.split(&apos; &apos;);
    var hostname = window.location.hostname;
    try {
        try {
            sforce.connection.sessionId=&quot;{!$Api.Session_ID}&quot;;
        } catch (e) {
            //
        }
        user  = sforce.connection.getUserInfo();
        var theme = user.userUiSkin;
        return {
            &quot;css_base&quot;  : &quot;https://&quot;+window.location.hostname,
            &quot;css_theme&quot; : theme,
            &quot;css_class&quot; : classes[0]};
    } catch (e) {
        return {
            &quot;css_base&quot; : &quot;https://&quot;+window.location.hostname,
            &quot;css_class&quot; : classes[0],
            &quot;css_theme&quot; : false
        };
    }
};
var getTabClassString = function() {
    var css_info = getTabClass();
    var tmp_url = &quot;&quot;;
    tmp_url += &apos;&amp;css_base=&apos;+encodeURIComponent(css_info.css_base);
    if (css_info.css_theme) {
        tmp_url += &apos;&amp;css_theme=&apos;+encodeURIComponent(css_info.css_theme);
    }
    tmp_url += &apos;&amp;css_class=&apos;+encodeURIComponent(css_info.css_class);
    return tmp_url;
};

var openPopup = function(){
    var data = &quot;&quot;;
    var items = idArray.join(&quot;,&quot;);
    pd.setSalesforceInstance(true);
    pd.makeRequest(&apos;getAuthToken&apos;,
        function (result) {
            var jwt = typeof result == &apos;object&apos; &amp;&amp; &apos;token&apos; in result ? result.token : &apos;&apos;;
            var use_jwt = jwt != &apos;&apos;;
            pd.makeRequest(&apos;createStaticDialerList&apos;,
                function (data) {
                    if (!data) {
                        alert(&apos;There was a problem creating the list.&apos;);
                        return;
                    }
                    if (data.errors &amp;&amp; data.errors.length &gt; 0) {
                        var err = &quot;&quot;;
                        if (data.errors[0] &amp;&amp; data.errors[0][&apos;message&apos;]) {
                            err = &apos;\nThe following message was returned.\n\n&apos;+data.errors[0][&apos;message&apos;];
                        }
                        alert(&apos;There was a problem creating the list.&apos;+err);
                        return;
                    }
                    if (!data.items || !data.items.length) {
                        alert(&apos;At least one selected row must be related to an Account, Contact, or Lead.&apos;);
                        return;
                    }
                    var html = &quot;&lt;form name=&apos;createList&apos; method=&apos;post&apos; action=&apos;https://{!$User.qbdialer__is_subdomain__c}.insidesales.com/noauth/create_sf_list?&quot;
                    html += &quot;salesforce_package_version=6.21.3&quot;;
                    html += &quot;&amp;type=Task&quot;;
                    html += &quot;&amp;agent_phone={!User.Phone}&quot;;
                    if (!use_jwt) {
                        html += &quot;&amp;token={!User.qbdialer__is_token__c}&quot;;
                        html += &quot;&amp;organization_id={!$Organization.Id}&quot;;
                    }
                    html += getTabClassString();
                    html += &quot;&apos;&gt;&lt;input type=&apos;submit&apos; style=&apos;visibility:hidden&apos;&gt;&quot;;
                    if (use_jwt) {
                        html += &quot;&lt;input type=&apos;hidden&apos; name=&apos;Authorization&apos; value=&apos;&quot;+jwt+&quot;&apos;&gt;&quot;;
                    }
                    for (var i=0; i &lt; data.items.length; i++) {
                        html += &quot;&lt;input type=&apos;hidden&apos; name=&apos;leads[]&apos; value=&apos;&quot;+data.items[i]+&quot;&apos;&gt;&quot;;
                    }
                    html += &quot;&lt;&quot;+&quot;/form&gt;&quot;;
                    html += &quot;&lt;script&gt;document.createList.submit();&lt;&quot;+&quot;/script&gt;&quot;;
                    var host = document.location.protocol + &quot;//&quot; + document.location.hostname;
                    var w = window.open(host, &quot;&quot;, &quot;height=700,width=800,menubar=0,resizable=1,scrollbars=1,status=0,titlebar=0,toolbar=0,location=0&quot;);
                    w.document.write(html);
                },
                function (err) {
                    alert(&apos;There was a problem creating the list.\n\n&apos;+err);
                },
                &quot;&amp;type=Activity&amp;ids=&quot; + items
            );
        }
    );
}

var user_oauth_token = &apos;{!JSENCODE($User.qbdialer__is_token__c)}&apos;;
if (!user_oauth_token) {
    window.location.href=&quot;/apex/qbdialer__InsideSales_OAuth_Setup&quot;;
} else {
    var idArray = {!GETRECORDIDS($ObjectType.Task)};
    if(idArray.length == 0){
        alert(&quot;Please select at least one row&quot;);
    }
    else{
        openPopup();
    }
}</url>
    </webLinks>
    <webLinks>
        <fullName>qbdialer__Launch_Click_to_Call</fullName>
        <availability>online</availability>
        <description>For Beta</description>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Launch Click-to-Call (Old)</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>var th = window.top.document.body;
			var s = window.top.document.createElement(&apos;script&apos;);
			s.setAttribute(&apos;type&apos;,&apos;text/javascript&apos;);
			s.setAttribute(&apos;src&apos;,&quot;/resource/qbdialer__c2c_resources/20160122025855/c2c_console.js&quot;);
			th.appendChild(s);</url>
    </webLinks>
    <webLinks>
        <fullName>qbdialer__Manage_Lists</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Manage Lists</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>{!REQUIRESCRIPT(&apos;/js/functions.js&apos;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/11.1/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/jquery.min.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/jsonp.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/lib/persist.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/ISConference.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/c2c/ISClickToCall.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/qbdialer__c2c_resources/20160122025855/c2csf.js&quot;)}

var openPopup = function() { 
    pd.setSalesforceInstance(true);
    pd.makeRequest(&apos;getAuthToken&apos;,
        function (result) {
            var jwt = typeof result == &apos;object&apos; &amp;&amp; &apos;token&apos; in result ? result.token : &apos;&apos;;
            var use_jwt = jwt != &apos;&apos;;
            var html = &quot;&lt;html&gt;&lt;body&gt;&lt;form id=&apos;createList&apos; name=&apos;createList&apos; method=&apos;post&apos; action=&apos;https://{!$User.qbdialer__is_subdomain__c}.insidesales.com/noauth/manage_sf_lists?&quot;;
            html += &quot;salesforce_package_version=6.21.3&quot;;
            if (!use_jwt) {
                html += &quot;&amp;organization_id={!$Organization.Id}&quot;;
                html += &quot;&amp;token={!User.qbdialer__is_token__c}&quot;;
            }
            html += &quot;&amp;agent_phone={!User.Phone}&apos;&gt;&quot;; 
            if (use_jwt) {
                html += &quot;&lt;input type=&apos;hidden&apos; name=&apos;Authorization&apos; value=&apos;&quot;+jwt+&quot;&apos;&gt;&quot;;
            }
            html += &quot;&lt;input type=&apos;submit&apos; style=&apos;visibility:hidden&apos;&gt;&lt;&quot;+&quot;/form&gt;&quot;; 
            html += &quot;&lt;script&gt;document.createList.submit();&lt;&quot;+&quot;/script&gt;&lt;/body&gt;&lt;/html&gt;&quot;; 
            var host = document.location.protocol+&quot;//&quot;+ 
            document.location.hostname; 
            var w = window.open(host, &quot;&quot;, &quot;height=200,width=600,menubar=0,resizable=1,scrollbars=1,status=0,titlebar=0,toolbar=0,location=0&quot;); 
            w.document.write(html); 
        }
    );
} 

var user_oauth_token = &apos;{!JSENCODE($User.qbdialer__is_token__c)}&apos;;
if (!user_oauth_token) {
    window.location.href=&quot;/apex/qbdialer__InsideSales_OAuth_Setup&quot;;
} else {
    openPopup();
}</url>
    </webLinks>
</CustomObject>
